<!DOCTYPE html>
<html lang="ja">

<head>
    <%- include("../components/lib.ejs") %>
        <title>U labeler</title>
</head>


    <body>

        <article>
            <!-- ページ名 -->
            <h3 class="icon_setting_title">支払方法選択<hr></h3>


        <div class="address_input">
            <div class="select_payment">

                    <input type="radio" value="paypay" name="paymentMethod">PayPay<br>
                    <input type="radio" value="card" name="paymentMethod" checked>クレジットカード<br><br>
                <div class="payment_detali">
                    ご利用になるクレジットカードの情報を<br>
                    お間違いのないようにご入力してください。
                </div>
                <div class="choise_card">
                    <br>
                    ご利用可能なクレジットカード
                    <img src="/images/system/visa.png" alt="">
                </div> 
            </div>
            <table >
                <tr><th></th><td>　　　</td></tr>
                <th></th>
                <tr>
                    <th colspan="2">カード名義人<font color="red">*</font>　　　：</th>
                    <td colspan="4"><input type="text" name="name_card" class="" placeholder="半角ローマ字"></td>
                </tr>
                <tr>
                    <th colspan="2">カード番号<font color="red">*</font>　　　　：</th>
                    <td><input type="text" name="cardnumber" class="" placeholder="1234" maxlength="16"></td>
                </tr>
                <tr>
                    <th colspan="2">カード有効期限<font color="red">*</font>　　：</th>
                    <td><select class="mati_select" name="expirationMonth">
                        <option value="" selected>00</option>
                        <option value="1">01</option>
                        <option value="2">02</option>
                        <option value="3">03</option>
                        <option value="4">04</option>
                        <option value="5">05</option>
                        <option value="6">06</option>
                        <option value="7">07</option>
                        <option value="8">08</option>
                        <option value="9">09</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        </select>
                    </td>
                    <td>月</td>
                    <td><select class="mati_select" name="expirationYear">
                        <option value="" selected>00</option>
                        <option value="1">22</option>
                        <option value="2">23</option>
                        <option value="3">24</option>
                        <option value="4">25</option>
                        <option value="5">26</option>
                        <option value="6">27</option>
                        <option value="7">28</option>
                        <option value="8">29</option>
                        <option value="9">30</option>
                        <option value="10">31</option>
                        <option value="11">32</option>
                        <option value="12">33</option>
                        </select>
                    </td>
                    <td>年</td>
                    
                </tr>
                <tr>
                    <th colspan="2">セキュリティコード<font color="red">*</font>：</th>
                    <td colspan="1"><input type="text" name="card" class="" placeholder="・・・"></td>
                    <!-- 今回は使わないので破棄 -->
                </tr>
            </table>
        </div>

    </div>

    <!-- <div class="check4">
        <input type="checkbox" class="check1" name="check" checked>保存
    </div> -->


    <div class="double_button">
        <button type="button" class="white_button" onclick="location.href=''">戻る</button><!-- 購入確認画面へ -->
        <button type="button" class="black_button" onclick="send()">決定</button>
    </div>
    
    </article>
    <script src="https://cdn.jsdelivr.net/npm/bubbly-bg@1.0.0/dist/bubbly-bg.js"></script>
        <script>
            bubbly({
            blur: 5,
            bubbleFunc: () => `hsla(${Math.random() * 350}, 90%, 50%, ${Math.random() * 0.1})`,
            canvas: document.querySelector("#back"),
            colorStart: '#fff',
            colorStop: '#fff',
            compose: 'source-over',
            shadowColor: '#ffffef',
            velocityFunc:() => Math.random() * 1.4,
            radiusFunc:() => 3 + Math.random() * 20,
            });

            const paymentMethod = document.getElementsByName("paymentMethod");
            const cardNameElement = document.getElementsByName("name_card");
            const cardNumber = document.getElementsByName("cardnumber");
            const cardName = document.getElementsByName("name_card")
            const cardExpirationMonth = document.getElementsByName("expirationMonth");
            const cardExpirationYear = document.getElementsByName("expirationYear");

            function send(){
                let cardNumber = null;
                let name_card = null;
                let paymentMethodValue = "default";
                
                for (let i = 0; i < paymentMethod.length; i++) {
                    if (paymentMethod[i].checked) {
                        paymentMethodValue = paymentMethod[i].value;
                    }
                }
                
                console.log(paymentMethodValue);

                if (paymentMethodValue == "card") {
                    // cardNameを変数に格納
                    name_card = cardName.value;
                    // cardNumber1~cardNumber4を文字列連結する
                    cardNumber = `${cardNameElement[0].value}`;
                    console.log(cardNumber);
                    console.log(cardNameElement[0].value)
                }
            }
    </script>    
    <br>
</body>
</html>